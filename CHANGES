CHANGES
=======

chan_capi-0.x.x
------------------
- Set FAXREASONTEXT to "OK" instead of empty string.
- Disconnect reason 0x3400 is treated as 'successful' in faxmode.
- use CIP speech as default if transfercapability is unkown.
- set correct channel/cdr status in fax mode too.
- Use correct interface to wait on for ECT facility.

chan_capi-0.7.0
------------------
- added amaflags
- added pickupgroup (internal pickup with pickupexten)
- added capicommand(sendfax)
- dropped compatiblity to versions before Asterisk-1.2.0
- added capicommand(echocancel)
- added CAPI RTP (Eicon DIVA Server cards can do that)
- added new cli 'capi show channels'
- a lot of fixes

chan_capi-cm-0.6.5
------------------
- fixed compilation with Asterisk 1.0.7
- fixed call deflect if number is longer
- removed function VANITYNUMBER, this does not belong into channel drivers

chan_capi-cm-0.6.4
------------------
- don't do echo-squelch or gain if transfercapability is non-voice
- fix deadlock when changing to fax mode
- better capi message handling
- removed double memset to zero
- use safer copy_string function
- removed unneeded lockB3q
- avoid capi message number zero
- added locking rules
- fix ECT (use implicit ECT)
- fixed setting language for each interface
- fix wait for b-channel to go down on ECT.

chan_capi-cm-0.6.3
------------------
- fixed buffer overflow in overlap dial
- remove some compiler warnings

chan_capi-cm-0.6.2
------------------
- set some info variables when receiving fax
- added language support
- prepared devicestate(hint) support
- don't change early-B3 setting on conf error for CONNECT_B3
- small fixes in Makefile targets (thanks to Karsten Keil)
- don't send audio to local exchange when in TE mode.
- fix missing CONF messages when no interface is found
- small transfercap and overlapdial fix
- don't forward DTMF if in NT-mode and the line is not connected yet.
- fixed line interconnect
- b-channel handling better
- NT mode progress
- removed deadlock in faxreceive.
- initialize variable ocid
- correct use of timeoutms in native bridge
- use more common defines for mutex_lock/unlock and _log()
- clean up and OpenPBX portability.
- adapted to latest asterisk bridge function prototype.

chan_capi-cm-0.6.1
------------------
- fixed setting of redirecting number rdnis instead of cid.
- allow setting a callerid in the dial() command without changing
  the original channel callerid.
- added config 'defaultcid' to set a default caller id which will be
  used if dial option 'd' is specified.
- moved ast_softhangup() out of interface lock
- use correct mutex_init call for interface lock
- when 'o' option is used for overlap dialing, don't send any digits
  with the CONNECT_REQ. This gives better progress together with 'b'.
- create a pseudo channel for each interface for incoming signalling
  without B-channel.
- added channel locks
- fixed capi init order (thanks to Hans Petter Selasky)
- fixed did handling
- set RDNIS if redirecting number was received.
- simplified call to ast_exists_extension()
- when check for valid extension, check the callerid as well
- changed call-waiting and deflect handling in CONNECT_IND
- use 'immediate' config in MSN mode, if pbx shall be started on
  CONNECT_IND and shall not wait until SETUP/SENDING-COMPLETE was received.
  Since info like REDIRECTINGNUMBER will come after CONNECT_IND, this may
  be lost then. But for some drivers/telcos/pbx, this setting is needed.
- fix start of line interconnect in old mode.
- start early-b3 on PROCEEDING too.
- don't send audio data, if in fax receive mode
- disconnect on finished fax immediately
- don't run through gain list, if gain is 1.0.
- use correct A-law idle value.
- removed old example from capi.conf

chan_capi-cm-0.6
----------------
- added 'relaxdtmf'.
- more BSD compatibility
- correct PROGRESS handling
- start PBX on SETUP/SENDING-COMPLETE for PtP only.
- added verbose text for capi info/reason error messages.
- fixed echo-cancel setup structure
- use correct facility-selector for echo-cancel
- use capi.conf option 'echocancelold' for old facility-selector (6)
- changed isdnmode configuration from ptp/ptmp to msn/did
- added ntmode configuration
- added application capicommand() for CAPI based applications
  (removed standalone applications)
- capicommand(RETRIEVE) can now be called from other channels
- support ISDN hold (holdtype in capi.conf)
- added HOLD/RETRIEVE for Asterisk indications.
- added custom function VANITYNUMBER to convert letters into digits.
- added CAPI Line Interconnect (native bridging)
- use variable CONNECTEDNUMBER on Answer().
- set variable REDIRECTINGNUMBER on incomming call if it was diverted.
- added variable REDIRECTREASON
- fixed unload
- removed obsolete thread mutex
- fixed dnid/exten/immediate handling on PtP.
- receive a fax via CAPI is now done with capicommand(receivefax|...) and added stationid...
- fixed call-deflection and moved this feature from separate application
  to capicommand().
- added config option 'immediate' to start pbx if no dnid has been received yet.
- endian fixes
- compile fixes with newer Asterisk
- update channel name on did changes.
- support 'type of number' (numbering-plan).
- U-Law setting is now done in capi.conf instead of Makefile define.
- allow using interface name in Dial().
- on hangup, use hangupcause from other channel or from var PRI_CAUSE.
- improved DID handling on PtP connections.
- capi.conf structure changes: one own section for each interface,
  no global 'interfaces' any more. Section name will be interface name.
- restructured module loading and init.
- dial string changed: parameters like 'b' not as part of number any more.
- send alert on alerting only (busy() and congestion() work now).
- better overlap sending (new parameter 'o' for dialstring to
  send only the first two digits with CONNECT_REQ only, the remaining
  digits and even digits following the dial() command, will be send
  as INFO_REQ/Overlap).
- further fixups

